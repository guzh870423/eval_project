<html>
  <body>
    <h1>Reports for semester {{semesterName}}, week {{currentWeek}}</h1>
    <table border="1 px solid black">
        <caption>Average ranks <br>
            normalized rank =  rank / number of reviews given by evaler. Range: (0,1]<br>
            normalized token = token * number of reviews given by evaler.
        </caption>
        <tr>
            <th>student</th>
            <th>NO. of reveiws</th>
            <th>unweigh. avg. rank</th>
            <th>weigh. avg. rank</th>
            <th>norm. avg. token</th>
        </tr>
        {% for student in students %}
        <tr>
            <td>{{ names[student.user_name] }}</td>
            <td>{{len(reversedEvals[currentWeek-1][student.user_name])}}</td>
            <td>{{averageRank[currentWeek-1][student.user_name]}}</td>
            <td>{{weightedRank[student.user_name]}}</td>
            <td>{{averageToken[currentWeek-1][student.user_name]}}</td>
        </tr>
        {% endfor %}
    </table>
    {% for student in students %}
        <br>
        <table border="1 px solid black">
            <caption>Evalee: {{ names[student.user_name]  }}</caption>
            <tr>
                <th>Evaler</th>
                <th>team week</th>
                <th>No. rev.</th>
                <th>Nm. rk</th>
                <th>Nm. tkn</th>
                <th>Adjective</th>
                <th>Description</th>
            </tr>
            {% for evaler in sortedEvaler[currentWeek-1][student.user_name] %}
                <tr>
                    <td>{{ names[evaler] }}</th>
                    <td width="80px" style="word-wrap:break-word;">{{ connection[student.user_name][evaler] }}</th>
                    <td>{{ len(evals[currentWeek-1][evaler]) }}</th>
                    <td>{{ reversedEvals[currentWeek-1][student.user_name][evaler][1] }}</th>
                    <td>{{ reversedEvals[currentWeek-1][student.user_name][evaler][2] }}</th>
                    <td width="100px" style="word-wrap:break-word;">{{ reversedEvals[currentWeek-1][student.user_name][evaler][0].adjective }}</th>
                    <td width="300px" style="word-wrap:break-word;">{{ reversedEvals[currentWeek-1][student.user_name][evaler][0].description }}</th>
                </tr>
            {% endfor %}
        </table>

        {% include 'charts/' + student.user_name + '.html' %}
    {% endfor %}

  </body>
</html>